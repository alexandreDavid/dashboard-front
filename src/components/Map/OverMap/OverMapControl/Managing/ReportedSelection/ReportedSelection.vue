<template>
  <div id="forecast-selection">
    <div v-if="isLoaded">
      <div class="list-group">
        <a href="#" class="list-group-item list-group-item-action flex-column align-items-start" v-for="reportedParameter in reportedParameters" :key="reportedParameter.name" @click="onSelectParameter(reportedParameter)" v-bind:class="{ active: reportedParameter.name === activeParam }">
          <div class="d-flex w-100 justify-content-between">
            <div class="mb-1">{{reportedParameter.label}}</div>
            <div><font-awesome-icon icon="info" v-on:click.stop="displayInfos(reportedParameter)" class="display-infos text-secondary" /></div>
          </div>
          <div v-show="reportedParameter.name === displayedInfo" class="displayed-infos">
            <small>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</small>
          </div>
        </a>
      </div>
    </div>
    <Loading v-if="!isLoaded"/>
  </div>
</template>

<script>
import Loading from '@/components/Loading/Loading'

export default {
  name: 'ReportedSelection',
  components: {
    Loading
  },
  inject: ['getSelectedReportedLayer'],
  data () {
    return {
      parameterGroupings: [],
      activeParam: false,
      openedGroup: false,
      isLoaded: false,
      displayedInfo: false
    }
  },
  created () {
    this.reportedParameters = this.getParams()

    // selection of the current layer
    const displayedReportedLayer = this.getSelectedReportedLayer()
    this.activeParam = displayedReportedLayer && displayedReportedLayer.name

    this.isLoaded = true
  },
  methods: {
    onSelectParameter (selectedParameter) {
      this.activeParam = selectedParameter.name
      this.$emit('selectedReportedParameter', selectedParameter)
    },
    displayInfos (parameter) {
      this.displayedInfo = parameter.name
    },
    getParams () {
      return [{
        label: 'Meteorological stations',
        name: 'meteorological_station'
      }]
    }
  }
}
</script>
